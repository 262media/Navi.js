(function(e){e.fn.navi=function(t){this.each(function(){var n=e(this),r=n.data("navi"),i={hash:"#!/",content:e("#content"),hrefs:e([]),pages:[],defaultPage:true,defaultPageHash:true,useAnimation:true,animationSpeed:100,init:function(){i.menu=e(">ul>li",i.me);i.cont=e(">ul>li",i.content);i.hashLen=i.hash.length;i.loadHref();i.loadPages();i.defaultPage?i.loadDefault():false;i.hideOther();i.setActive()},hideOther:function(){i.cont.each(function(t){e(t).hasClass("active")?e(t).siblings().removeClass("active").css("display","none"):false})},loadHref:function(){i.menu.each(function(t,n){i.hrefs[t]=e("> a",n).attr("href")})},loadPages:function(){i.hrefs.each(function(t){i.pages[t]=e(this).slice(i.hashLen)})},loadDefault:function(){i.menu.each(function(t,n){if(e(n).hasClass("active")){i.cont.each(function(t,r){var s=e(r).attr("id");if(e(">a",n).attr("href").slice(i.hashLen)==s){e(r).siblings().css("display","none");e(r).addClass("active").siblings().removeClass("active")}})}})},setActive:function(){var t=[],n=[],r=location.hash.slice(i.hashLen);i.cont.each(function(n,s){t[n]=e(s).attr("id");if(r==t[n]&&location.hash.slice(0,i.hashLen)==i.hash){e(s).fadeIn().addClass("active").siblings().css("display","none").removeClass("active")}});i.menu.each(function(t,s){n[t]=e(">a",s).attr("href").slice(i.hash.length);if(r==n[t]){e(s).addClass("active").siblings().removeClass("active")}})},debug:function(e){console.log(e)},animation:function(t,n){i.cont.each(function(r,o){var u=e(o).height();e(o).attr("height",u);i.content.stop().animate({height:"0"},t,function(){i.setActive();i.cont.each(function(r,o){if(e(o).hasClass("active")){i.content.stop().animate({height:Number(e(o).attr("height"))+5+"px"},t,n)}})})});e(window).bind("resize",function(){i.cont.each(function(n,r){if(e(r).hasClass("active")){i.activeHeight=e(r).height();i.content.stop().animate({height:Number(i.activeHeight)+5+"px"},t)}})})}};r?i=r:n.data({navi:i});if(typeof t=="object"){e.extend(i,t)}i.me||i.init(i.me=n);e(window).hashchange(function(){location.hash==i.hash?_setActive():i.useAnimation?i.animation(i.animationSpeed):i.setActive()})});return this}})(jQuery)